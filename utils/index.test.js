const assert = require('assert');
const { parseRdf } = require('./index');

const testRdfData = {
  "rdf:RDF":{"$":{"xml:base":"http://www.gutenberg.org/","xmlns:dcterms":"http://purl.org/dc/terms/","xmlns:pgterms":"http://www.gutenberg.org/2009/pgterms/","xmlns:rdfs":"http://www.w3.org/2000/01/rdf-schema#","xmlns:dcam":"http://purl.org/dc/dcam/","xmlns:rdf":"http://www.w3.org/1999/02/22-rdf-syntax-ns#","xmlns:cc":"http://web.resource.org/cc/"},"pgterms:ebook":[{"$":{"rdf:about":"ebooks/10924"},"dcterms:subject":[{"rdf:Description":[{"$":{"rdf:nodeID":"Nd33a29ee97b143b6b991b8d848df8cab"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/LCSH"}}],"rdf:value":["Middle East -- Description and travel"]}]},{"rdf:Description":[{"$":{"rdf:nodeID":"Nb0fdad23b75a4b469e1664c99025b257"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/LCSH"}}],"rdf:value":["Spain -- Description and travel"]}]},{"rdf:Description":[{"$":{"rdf:nodeID":"N6c0e10aae30f4020aad36ed1572b0162"},"rdf:value":["DS"],"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/LCC"}}]}]}],"dcterms:license":[{"$":{"rdf:resource":"license"}}],"dcterms:hasFormat":[{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/files/10924/10924-h.zip"},"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N0d9b68cb7dbb4b08b98696344d3f8ba0"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"text/html","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]},{"rdf:Description":[{"$":{"rdf:nodeID":"Nae9df68d9afc459aa36a1d79e2c4441b"},"rdf:value":[{"_":"application/zip","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}],"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:extent":[{"_":"305868","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:modified":[{"_":"2004-02-03T20:37:06","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/cache/epub/10924/pg10924.cover.small.jpg"},"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N8160e052be5b4723ac2efb3013928233"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"image/jpeg","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:extent":[{"_":"3885","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:modified":[{"_":"2020-06-06T03:58:09.299181","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/ebooks/10924.epub.noimages"},"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N057819a3f4344d3c940fd4f451d686ed"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"application/epub+zip","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:modified":[{"_":"2020-06-06T03:58:06.334246","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:extent":[{"_":"381507","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/files/10924/10924.zip"},"dcterms:modified":[{"_":"2004-02-03T20:37:06","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"Nb500beb020464f76ac26fd16242f2aa9"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"application/zip","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]},{"rdf:Description":[{"$":{"rdf:nodeID":"N6a95d0d7a30f4355be83fa16cf63c42e"},"rdf:value":[{"_":"text/plain","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}],"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:extent":[{"_":"302225","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/files/10924/10924.txt"},"dcterms:extent":[{"_":"773800","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N4b7d1dfe2dad40a1b4b7aa01efbd1c06"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"text/plain; charset=us-ascii","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:modified":[{"_":"2004-02-03T20:37:04","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/ebooks/10924.txt.utf-8"},"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:extent":[{"_":"773971","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:modified":[{"_":"2020-06-06T03:58:05.662260","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N854ebe74688c4b72b3dc1adf9f8f78fb"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"text/plain","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/ebooks/10924.kindle.noimages"},"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"Nd9e5b06f8520497aa65af6bab4035493"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"application/x-mobipocket-ebook","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:modified":[{"_":"2020-06-06T03:58:09.262175","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:extent":[{"_":"1413707","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/files/10924/10924-8.zip"},"dcterms:modified":[{"_":"2004-02-03T20:37:06","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:extent":[{"_":"302425","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N81a12f8cffe54f589be601bff6b39ec3"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"text/plain; charset=iso-8859-1","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]},{"rdf:Description":[{"$":{"rdf:nodeID":"N92629ea6487343f993e686bed7f1165e"},"rdf:value":[{"_":"application/zip","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}],"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}]}]}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/ebooks/10924.rdf"},"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:extent":[{"_":"15109","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:modified":[{"_":"2020-07-02T05:09:04.641028","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N09283a4137504beba3b2fbd406c7ceef"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"application/rdf+xml","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/files/10924/10924-8.txt"},"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N79946013de264c398b8974e9848c7da3"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"text/plain; charset=iso-8859-1","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:extent":[{"_":"773699","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:modified":[{"_":"2004-02-03T20:37:04","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/files/10924/10924-h/10924-h.htm"},"dcterms:modified":[{"_":"2004-02-03T20:37:04","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N59fd7d777024449d81a999881700ea0b"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"text/html; charset=iso-8859-1","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}],"dcterms:extent":[{"_":"790661","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/ebooks/10924.kindle.images"},"dcterms:modified":[{"_":"2020-06-06T03:58:07.796260","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N7cd61643ddf24040afa1526715afc3c1"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"application/x-mobipocket-ebook","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:extent":[{"_":"1413715","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/ebooks/10924.epub.images"},"dcterms:extent":[{"_":"381507","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:modified":[{"_":"2020-06-06T03:58:06.145257","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"N938bfb85e3674695b254c376c9342a3a"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"application/epub+zip","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}]}]},{"pgterms:file":[{"$":{"rdf:about":"https://www.gutenberg.org/cache/epub/10924/pg10924.cover.medium.jpg"},"dcterms:modified":[{"_":"2020-06-06T03:58:09.331180","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#dateTime"}}],"dcterms:extent":[{"_":"14855","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:format":[{"rdf:Description":[{"$":{"rdf:nodeID":"Ne5200cb64f50478891c3d2ecdc3d1c35"},"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/IMT"}}],"rdf:value":[{"_":"image/jpeg","$":{"rdf:datatype":"http://purl.org/dc/terms/IMT"}}]}]}],"dcterms:isFormatOf":[{"$":{"rdf:resource":"ebooks/10924"}}]}]}],"dcterms:title":["The Lands of the Saracen\nPictures of Palestine, Asia Minor, Sicily, and Spain"],"dcterms:language":[{"rdf:Description":[{"$":{"rdf:nodeID":"N58703ba395fe4a88b418d339fe8e3fe2"},"rdf:value":[{"_":"en","$":{"rdf:datatype":"http://purl.org/dc/terms/RFC4646"}}]}]}],"dcterms:type":[{"rdf:Description":[{"$":{"rdf:nodeID":"N640a8110e3bd4579ad48532066488eac"},"rdf:value":["Text"],"dcam:memberOf":[{"$":{"rdf:resource":"http://purl.org/dc/terms/DCMIType"}}]}]}],"dcterms:creator":[{"pgterms:agent":[{"$":{"rdf:about":"2009/agents/167"},"pgterms:birthdate":[{"_":"1825","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"pgterms:alias":["Taylor, James Bayard","Taylor, J.B.","Taylor, J. B."],"pgterms:webpage":[{"$":{"rdf:resource":"https://en.wikipedia.org/wiki/Bayard_Taylor"}}],"pgterms:deathdate":[{"_":"1878","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"pgterms:name":["Taylor, Bayard"]}]}],"dcterms:rights":["Public domain in the USA."],"dcterms:publisher":["Project Gutenberg"],"pgterms:downloads":[{"_":"84","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#integer"}}],"dcterms:issued":[{"_":"2004-02-01","$":{"rdf:datatype":"http://www.w3.org/2001/XMLSchema#date"}}]}],"cc:Work":[{"$":{"rdf:about":""},"rdfs:comment":["Archives containing the RDF files for *all* our books can be downloaded at\n            https://www.gutenberg.org/wiki/Gutenberg:Feeds#The_Complete_Project_Gutenberg_Catalog"],"cc:license":[{"$":{"rdf:resource":"https://creativecommons.org/publicdomain/zero/1.0/"}}]}],"rdf:Description":[{"$":{"rdf:about":"https://en.wikipedia.org/wiki/Bayard_Taylor"},"dcterms:description":["en.wikipedia"]}]}
};

describe('parseRdf function', function () {
  it('should return correct data based on input', function () {
    const meta = parseRdf(testRdfData);
    assert.deepEqual(meta, {
      title: 'The Lands of the Saracen\n' +
        'Pictures of Palestine, Asia Minor, Sicily, and Spain',
      license_rights: 'Public domain in the USA.',
      language: 'en',
      publisher: 'Gutenberg'
    });
  });

  it('should always return `Gutenberg` for `publisher` field', function () {
    const meta = parseRdf(testRdfData);
    assert.equal(meta.publisher, 'Gutenberg');
  });
});
